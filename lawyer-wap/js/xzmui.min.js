/* xzmui v0.1.0 2015-06-26 */
var xzmui=xzmui||{};xzmui.clickName="click",xzmui.path="http://st.xizi.com/xzmui/",xzmui.libs={swiper:["swiper/swiper.min.js","swiper/swiper.min.css"],mobiscroll:["mobiscroll/mobiscroll.min.js","mobiscroll/mobiscroll.min.css"],upload:["upload/lrz.mobile.min.js"],iscroll:["iscroll/iscroll-zoom.js"]},xzmui.load=function(a,b){function c(a){if(e("js",a)){var b=document.createElement("script");b.type="text/javascript",b.src=a,g.appendChild(b),b.onload=function(){f()}}else f()}function d(a){if(e("css",a)){var b=document.createElement("link");b.rel="stylesheet",b.href=a,g.appendChild(b),b.onload=function(){f()}}else f()}function e(a,b){var c="script",d="src";"css"===a&&(c="link",d="href");for(var e=document.getElementsByTagName(c),f=0;f<e.length;f++)if(e[f].getAttribute(d)==b)return!1;return!0}function f(){i++,i==h.length&&b()}var g=document.getElementsByTagName("head")[0],h=[],i=0;$.isArray(a)||(a=[a]);for(var j=0;j<a.length;j++)if(-1!=a[j].indexOf("."))h.push(a[j]);else for(var k in xzmui.libs)if(k==a[j]){for(var l=0;l<xzmui.libs[k].length;l++)h.push(xzmui.path+"libs/"+xzmui.libs[k][l]);break}for(var j=0;j<h.length;j++){var m=/[^\.]+$/.exec(h[j])+"";switch(m){case"js":c(h[j]);break;case"css":d(h[j])}}},function(a,b){var c=function(a){var c={title:"\u5f39\u51fa\u6846",className:"",content:"\u5185\u5bb9",confirmText:"\u786e\u5b9a",cancelText:"\u5173\u95ed",confirm:null,cancel:null};a=b.extend(c,a);var d=(new Date).getTime(),e='<div class="ui-dialog '+a.className+'" id="dialog-'+d+'"><div class="ui-dialog-main"><div class="ui-dialog-hd">'+a.title+'</div><div class="ui-dialog-bd">'+a.content+'</div><div class="ui-dialog-ft"><button class="ui-dialog-btn ui-dialog-confirm">'+a.confirmText+'</button><button class="ui-dialog-btn ui-dialog-cancel">'+a.cancelText+"</button></div></div></div>";return b("body").append(e),this.opts=a,this.dialog=b("#dialog-"+d),this._init()};c.prototype={_init:function(){var c=this;return this.opts.confirm||this.opts.cancel?(this.opts.confirm||(this.dialog.find(".ui-dialog-confirm").remove(),this.opts.confirm=function(){}),this.opts.cancel||(this.dialog.find(".ui-dialog-cancel").remove(),this.opts.cancel=function(){})):(this.dialog.find(".ui-dialog-cancel").remove(),this.opts.confirm=function(){}),this.dialog.find(".ui-dialog-btn").on(a.clickName,function(a){b(this).hasClass("ui-dialog-confirm")&&b.isFunction(c.opts.confirm)&&c.opts.confirm()!==!1&&c.hide(),b(this).hasClass("ui-dialog-cancel")&&b.isFunction(c.opts.cancel)&&c.opts.cancel()!==!1&&c.hide(),a.stopPropagation()}),this},show:function(){return this.dialog.addClass("ui-dialog-show"),this},hide:function(){return this.dialog.removeClass("ui-dialog-show"),this},title:function(a){return this.dialog.find(".ui-dialog-hd").html(a),this},content:function(a){return this.dialog.find(".ui-dialog-bd").html(a),this}},a.dialog=function(a){return new c(a)}}(xzmui,Zepto),function(a){function b(b,d,e){null==c&&(c=a.dialog({className:"ui-dialog-tips"})),c.dialog.attr("id",b),d=d?'<div class="ui-dialog-tips-text">'+d+"</div>":"",c.content('<div class="ui-dialog-tips-icon"></div>'+d).show(),("success"==b||"error"==b)&&setTimeout(function(){c.hide(),e&&e()},2e3)}var c=null;a.loading=function(a){b("loading",a)},a.success=function(a,c){b("success",a,c)},a.error=function(a,c){b("error",a,c)}}(xzmui,Zepto),function(a,b){var c=function(a,c){var d={index:0,title:window.document.title,data:[],mode:"default",ready:null};return this.selector=a,this.opts=b.extend(d,c),this._init(),this._crateSwiper(),this._event(),this};c.prototype={_init:function(){var a;switch(this.opts.mode){case"default":a='<a class="ui-header-link ui-header-back" href="javascript:;"></a><h1 class="ui-header-title">'+this.opts.title+'</h1><div class="ui-header-right"><div class="ui-photoview-num"><span class="ui-photoview-current">1</span> / <span class="ui-photoview-total"></span></div></div>';break;case"upload":a='<a class="ui-header-link ui-header-back" href="javascript:;"></a><h1 class="ui-header-title"><div class="ui-photoview-num"><span class="ui-photoview-current">1</span> / <span class="ui-photoview-total"></span></div></h1><div class="ui-header-right"><div class="ui-header-link ui-photoview-remove"><i class="iconfont icon-remove"></i></div></div>'}for(var c='<div class="ui-photoview"><header class="ui-header">'+a+'</header><section class="ui-photoview-main"><div class="swiper-wrapper"></section></div>',d=[],e=0;e<this.opts.data.length;e++){var f=this.opts.data[e];d.push('<div class="swiper-slide" data-src="'+f.src+'"><div class="ui-loading-icon"></div></div>')}b(".ui-wrapper").append(c),this.ui=b(".ui-photoview"),this.ui.find(".swiper-wrapper").html(d.join(""))},_crateSwiper:function(){var c=this;a.load("swiper",function(){c.swiper=b(".ui-photoview-main").swiper({onInit:function(a){c.swiper=a,c.update(),c.swiper.slides.length&&c.loadImage(a.activeIndex),c.opts.ready&&c.opts.ready(a)},onSlideChangeEnd:function(a){c.loadImage(a.activeIndex)},onSlideChangeStart:function(){c.update()}})})},_event:function(){var a=this;b("body").on("click",a.selector,function(){var c=0||a.opts.index-1;"upload"==a.opts.mode&&(c=b(this).index()),a.swiper.slideTo(c,0),0==c&&a.loadImage(c),a.show()}),this.ui.find(".ui-header-back").on("click",function(){a.hide()}),this.ui.find(".ui-photoview-remove").on("click",function(){a.swiper.removeSlide(a.swiper.activeIndex),b(a.selector).eq(a.swiper.activeIndex).remove(),a.update(),a.swiper.slides.length?a.loadImage(a.swiper.activeIndex):a.hide()})},loadImage:function(a){var c=b(this.swiper.slides[a]),d=new Image,e=c.data("src");""!=e&&(d.src=e,c.data("src",""),d.onload=function(){c.html(d)})},show:function(){this.ui.removeClass("ui-photoview-hide").addClass("ui-photoview-show")},hide:function(){this.ui.removeClass("ui-photoview-show").addClass("ui-photoview-hide")},update:function(){this.ui.find(".ui-photoview-current").text(this.swiper.activeIndex+1),this.ui.find(".ui-photoview-total").text(this.swiper.slides.length),this.swiper.update()}},a.photoView=function(a,b){return new c(a,b)}}(xzmui,Zepto),$(function(){var a=$("body");!function(){a.find(".ui-tab-link").on(xzmui.clickName,function(){$(this).addClass("current").siblings().removeClass("current"),$(this).parent().next(".ui-tab-con").find(".ui-tab-item").eq($(this).index()).addClass("show").siblings().removeClass("show")}),a.find(".ui-tab").on("swipeLeft",function(){$(this).find(".ui-tab-nav .current").next().trigger("tap")}),a.find(".ui-tab").on("swipeRight",function(){$(this).find(".ui-tab-nav .current").prev().trigger("tap")})}(),function(){a.on(xzmui.clickName,"[data-href]",function(){window.location.href=$(this).data("href")})}(),function(){var b=a.find(".ui-date"),c=a.find(".ui-time"),d=a.find(".ui-custom-select");(b.length||c.length||d.length)&&($(b,c,d.find(".ui-input-text")).focus(function(){$(this).blur()}),xzmui.load("mobiscroll",function(){var e={theme:"ios",display:"bottom",lang:"zh",height:68,minWidth:160};if(b.length){var f={dateFormat:"yy-mm-dd"};f=$.extend(f,e),a.find(".ui-date").mobiscroll().date(f)}if(c.length){var f={};f=$.extend(f,e),a.find(".ui-time").mobiscroll().time(f)}d.length&&d.each(function(){var a=$(this),b=[],c=[];$(this).find("select").each(function(a){b.push({values:[],keys:[]}),$(this).find("option").each(function(){b[a].values.push($(this).text()),b[a].keys.push($(this).val()),$(this).attr("selected")&&c.push($(this).val())})});var d={wheels:[b],onSelect:function(b,c){for(var d=[],e=c.getArrayVal(),f=[],g=0;g<e.length;g++){var h=$(this).find("select").eq(g).find("option[value='"+e[g]+"']").attr("selected","selected").text();f.push(h),d.push({value:e[g],text:h})}if($(this).find(".ui-input-text").val(f.join(" ")),a.data("callback")){var i=window[a.data("callback")];i(d)}}};d=$.extend(d,e),$(this).mobiscroll().scroller(d),$(this).mobiscroll("setValue",c,!0)})}))}(),function(){var b=a.find(".ui-slider");b.length&&xzmui.load("swiper",function(){b.each(function(){var a=$(this),b={},c=a.find(".ui-slider-num");b=a.hasClass("ui-slider-title")?{onInit:function(a){c.text("1/"+a.slides.length)},onSlideChangeStart:function(a){c.text(a.activeIndex+1+"/"+a.slides.length)}}:{pagination:a.find(".swiper-pagination")},a.swiper(b)})})}(),function(){var b=a.find(".validform");b.length>0&&xzmui.validform(b)}(),function(){var b=a.find(".ui-page");if(b.length>0){var c='<div class="ui-page-bg ui-page-close"></div><div class="ui-page-keyboard"><div class="ui-page-topbar"><a href="javascript:;" class="ui-page-confirm ui-page-close">\u786e\u5b9a</a></div><ul class="cc"><li class="ui-page-item ui-page-num" data-key="1"></li><li class="ui-page-item ui-page-num" data-key="2"></li><li class="ui-page-item ui-page-num" data-key="3"></li><li class="ui-page-item ui-page-num" data-key="4"></li><li class="ui-page-item ui-page-num" data-key="5"></li><li class="ui-page-item ui-page-num" data-key="6"></li><li class="ui-page-item ui-page-num" data-key="7"></li><li class="ui-page-item ui-page-num" data-key="8"></li><li class="ui-page-item ui-page-num" data-key="9"></li><li class="ui-page-item ui-page-empty"></li><li class="ui-page-item ui-page-num" data-key="0"></li><li class="ui-page-item ui-page-delete"></li></ul></div>';a.append(c);var d=[],e=a.find(".ui-page-input");a.find(".ui-page-info").on(xzmui.clickName,function(){var b=$(window).height()-($(this).offset().top-$(window).scrollTop())-a.find(".ui-page").height()-20-488;0>b&&a.find(".ui-wrapper").css({"-webkit-transform":"translateY("+b+"px)"}),a.addClass("ui-page-show"),a.find(document).bind("touchmove",function(a){a.preventDefault()})});var f=parseInt(e.prev("span").text().split("/")[1]);a.find(".ui-page-close").on(xzmui.clickName,function(){if($(this).hasClass("ui-page-confirm")){if(""===$.trim(e.text()))return void xzmui.tips("\u8bf7\u8f93\u5165\u9875\u6570");if(parseInt(e.text())>f)return xzmui.tips("\u8f93\u5165\u6709\u8bef\uff0c\u9875\u6570\u8bf7\u4e0d\u8981\u5927\u4e8e"+f),d=[],void e.text("");window.location.href=b.data("url")+e.text()}d=[],a.removeClass("ui-page-show"),a.find(".ui-wrapper").css({"-webkit-transform":"translateY(0px)"}),a.find(document).unbind("touchmove")}),a.find(".ui-page-num").on(xzmui.clickName,function(){d.push($(this).data("key")),e.text(d.join(""))}),a.find(".ui-page-delete").on(xzmui.clickName,function(){d.pop(),e.text(d.join(""))})}}()}),function(a,b){a.autocomplete=function(a,c){var d={url:"",type:"GET",data:{},name:"keyword",arrows:!0,callback:null};c=b.extend(d,c);var e=b(a),f=null,g=c.arrows?"ui-list-arrows":"";e.after('<div class="ui-list '+g+'"></div>');var h=e.siblings(".ui-list");h.on("click",".ui-list-item",function(){return"#"===b(this).attr("href")?(h.removeClass("ui-list-show"),e.val(b(this).find(".ui-list-title").text()),!1):void 0}),e.on("input",function(){return h.addClass("ui-list-show").html('<div class="ui-search-tip ui-search-loading">\u6570\u636e\u52a0\u8f7d\u4e2d...</div>'),clearTimeout(f),""==b.trim(e.val())?(h.removeClass("ui-list-show"),!1):void(f=setTimeout(function(){var a=[];c.data[c.name]=e.val(),b.ajax({type:c.type,url:c.url,data:c.data,dataType:"json",success:function(b){if(c.callback)c.callback(h,b);else{if(b.length>0)for(var d=0;d<b.length;d++){var e=b[d];a.push('<a href="'+e.url+'" class="ui-list-item"><div class="ui-list-title">'+e.name+"</div></a>")}else a.push('<div class="ui-search-tip ui-search-empty">\u6682\u65e0\u641c\u7d22\u7ed3\u679c</div>');h.html(a.join(""))}}})},500))})}}(xzmui,Zepto),function(a,b){var c=null;a.tips=function(a){function d(){c=setTimeout(function(){g.removeClass("ui-tips-show")},2e3)}var e='<div class="ui-tips"><span></span></div>',f=b(".ui-tips span"),g=b("body");0===f.length&&(b("body").append(e),f=b(".ui-tips span")),g.hasClass("ui-tips-show")&&clearTimeout(c),f.text(a),g.hasClass("ui-tips-show")?clearTimeout(c):g.addClass("ui-tips-show"),d()}}(xzmui,Zepto),function(a,b){a.upload=function(c,d){var e={limit:5,name:"img[]"};d=b.extend(e,d);var c=b(c),f=".ui-upload-item",g=a.photoView(f,{mode:"upload",ready:function(a){b(f).each(function(){a.appendSlide('<div class="swiper-slide" data-src="'+b(this).find("img").attr("src")+'"><div class="ui-loading-icon"></div></div>'),g.update()})}});a.load("upload",function(){c.on("change",function(){var e=b(f),h=e.length;if(e.length+this.files.length>d.limit&&d.limit>0)a.tips("\u6700\u591a\u4e0a\u4f20"+d.limit+"\u5f20\u56fe\u7247");else for(var i=0;i<this.files.length;i++)c.parent().before('<div class="ui-upload-block ui-upload-item ui-loading"><div class="ui-loading-icon"></div></div>'),lrz(this.files[i],{width:800},function(a){var c=new Image;c.src=a.base64,c.onload=function(){b(f).eq(h).removeClass("ui-loading").html(c).append('<input type="hidden" name="'+d.name+'" value="'+a.base64+'">'),g.swiper.appendSlide('<div class="swiper-slide" data-src="'+a.base64+'"><div class="ui-loading-icon"></div></div>'),g.update(),h++}})})})}}(xzmui,Zepto),function(a,b){a.validform=function(c,d){function e(a){var c="";switch(a[0].tagName){case"INPUT":case"TEXTAREA":var d=a.attr("type");if("radio"==d)c=i.find("input[name='"+a.attr("name")+"']:checked").val();else if("checkbox"==d){var e=[];i.find("input[name='"+a.attr("name")+"']:checked").each(function(){e.push(b(this).val())}),c=e.join(",")}else c=a.val();break;case"SELECT":c=a[0].options[a[0].selectedIndex].value}return b.trim(c)}function f(a,b){var c=a.data(b);return c||("INPUT"==a[0].tagName&&a.hasClass("ui-input-text")||"TEXTAREA"==a[0].tagName)&&(c="null"==b?"\u8bf7\u8f93\u5165\u4fe1\u606f":"\u4fe1\u606f\u683c\u5f0f\u9519\u8bef"),c||(c="\u8bf7\u9009\u62e9\u4fe1\u606f"),c}function g(a){if("/"==a.charAt(0)&&"/"==a.charAt(a.length-1))return new RegExp(a.substring(1,a.length-1));for(var b in j)if(a==b)return j[b];return null}var h={callback:null,beforeCheck:null,beforeSubmit:null},i=b(c);d=b.extend(h,d);var j={email:/\w+((-w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+/,phone:/0?(13|14|15|18)[0-9]{9}/,number:/^[1-9]\d*$/,currency:/^\d+(?:\.\d{0,2})?$/},k={};return b.isFunction(d.beforeCheck)&&!d.beforeCheck(i)?!1:void i.on("submit",function(){var c;return i.find("[data-type]").each(function(){if(b(this).is(":visible")){c=!0;var h=b.trim(b(this).data("type"));if(""!==h){var j,l=e(b(this));if(""===l)return b(this).focus(),c=!1,j=f(b(this),"null"),b.isFunction(d.callback)?d.callback(b(this),j,i):a.tips(j),!1;var m=g(h);if(m&&!m.test(l))return b(this).focus(),c=!1,j=f(b(this),"error"),b.isFunction(d.callback)?d.callback(b(this),j,i):a.tips(j),!1;var n=b(this).attr("name");n&&(k[n]=l)}}}),b.isFunction(d.beforeSubmit)?c?d.beforeSubmit(i,k):!1:c})}}(xzmui,Zepto);